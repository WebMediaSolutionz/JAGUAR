var JAG={currentPage:null,highlight:{border:"thin solid red"},lang:$("html").attr("lang"),phones:null,cities:cities,formEntriesValid:!0,opts2:{color:"#4B286D",top:"5%",left:"5%",lines:13,length:25,width:10,radius:40,corners:1,rotate:0,speed:1,trail:80,shadow:!1,hwaccel:!1,className:"spinner2",zIndex:2e9},target2:null,spinner2:null,init:function(){var e=this;return e.setupCurrentPage().showVariants().attachEvents().setupPagination().ellipsis().setupDueNow().setupInputMasks(),"corporate_settings"===e.currentPage&&e.setupTabs(),"devices"!==e.currentPage&&"device"!==e.currentPage&&"accessories"!==e.currentPage||e.check_image_availability(),e},setupCurrentPage:function(){var e=this;return e.currentPage=$("html").attr("data-currentpage"),e},setupTabs:function(){var e=this;return $("#tab-container").easytabs({animate:!1}),e},attachEvents:function(){var e=this;return $(".menu").dropit(),$(".slider").slick({vertical:!0}),$(".datepicker").datepicker(),$("#myModal").on("shown.bs.modal",function(){$("#myInput").focus()}),$('a[href="#"]').click(function(e){e.preventDefault()}),e.stickyFooter(),$(".error_message .close").click(function(){$(this).closest(".error_message").fadeOut()}),$(".toggle_panel").click(function(){var e=$(this),s=e.attr("data-section"),a=e.closest(".outer-container").find(".advanced_search_table"),t=a.find("input"),i=(a.find(".frg-button"),!1);t.each(function(){var e=$(this);e.val().length>0&&(i=!0)}),s=void 0===s?".advanced_search_table":"."+s,e.hasClass("icon-plus-inverted")?e.closest(".advanced_search").find(".icon-plus-inverted").removeClass("icon-plus-inverted").addClass("icon-minus-inverted"):e.hasClass("icon-minus-inverted")&&e.closest(".advanced_search").find(".icon-minus-inverted").removeClass("icon-minus-inverted").addClass("icon-plus-inverted"),$(s).hasClass("open")?$(s).addClass("hide").addClass("closed").removeClass("open"):$(s).hasClass("closed")&&$(s).removeClass("hide").removeClass("closed").addClass("open")}),$(".js-show_list").click(function(){var e=$(this),s=e.text(),a=e.closest("tr").index(),a=parseInt(a)+2;switch(s){case"View list":s="Hide list",e.closest("tbody").find("tr:nth-child( "+a+" )").removeClass("hide").find("div").removeClass("hide"),$(".js-hide_subscribers_list").click(function(){var e=$(this),s=e.closest("tr").index(),s=parseInt(s);$(this).closest(".subscriber_list").addClass("hide").closest("tr").addClass("hide"),e.closest("tbody").find("tr:nth-child( "+s+" )").find(".js-show_list").text("View list")});break;case"Hide list":s="View list",e.closest("tbody").find("tr:nth-child( "+a+" )").addClass("hide").find("div").addClass("hide")}e.text(s)}),$(".btn_group .btn").click(function(){var e=$(this),s=e.closest(".btn_group").find(".btn");s.removeClass("current"),e.addClass("current")}),$(".js-sort").click(function(){var s=$(this),a=s.closest("div").find(".js-sort.frg-icon"),t=null,i=a.attr("data-field");a.addClass("holdup"),$(".js-sort.frg-icon").not(".holdup").removeClass("icon-arrow-up").addClass("icon-arrow-down"),a.hasClass("icon-arrow-down")?(a.removeClass("icon-arrow-down").removeClass("holdup").addClass("icon-arrow-up"),t=-1):a.hasClass("icon-arrow-up")&&(a.removeClass("icon-arrow-up").removeClass("holdup").addClass("icon-arrow-down"),t=1),e.sortTable(i,t)}),e.setupFilters(),$(".js-sort-by").change(function(){var e=$(this).val();$("nav.filter_nav").addClass("hide"),$("nav.filter_nav."+e).removeClass("hide")}),$(".browse_files .frg-input-field, .browse_files .frg-button").click(function(){e.getFile()}),$(".js-view_more").click(function(){var e=$(this),s=e.closest("div").find("ul");e.hasClass("closed")?(s.show("slow"),e.removeClass("closed").addClass("open").find(".text").text("Hide all").closest(".js-view_more").find(".frg-icon").addClass("icon-minus-circled").removeClass("icon-plus-circled")):e.hasClass("open")&&(s.hide("slow"),e.removeClass("open").addClass("closed").find(".text").text("View all").closest(".js-view_more").find(".frg-icon").addClass("icon-plus-circled").removeClass("icon-minus-circled"))}),$(".port select").change(function(){var e=$(this),s=e.closest("tr"),a=s.find(".account_nbr").find(".empty"),t=s.find(".account_nbr").find("input"),i=s.find(".existing_phone_nbr").find(".empty"),r=s.find(".existing_phone_nbr").find(".status"),n=s.find(".js-calling-city").find(".empty"),l=s.find(".js-calling-city").find("input"),o=s.find(".js-preferred-area-code").find(".empty"),c=s.find(".js-preferred-area-code").find(".frg-select-container");"yes"===e.val()?($(".account_nbr").removeClass("hide"),$(".existing_phone_nbr").removeClass("hide"),a.addClass("hide"),i.addClass("hide"),t.removeClass("hide"),r.removeClass("hide"),n.removeClass("hide"),l.addClass("hide"),o.removeClass("hide"),c.addClass("hide")):"no"===e.val()&&(a.removeClass("hide"),i.removeClass("hide"),t.addClass("hide"),r.addClass("hide"),n.addClass("hide"),l.removeClass("hide"),o.addClass("hide"),c.removeClass("hide"))}),$(".sim select").change(function(){var s=$(this),a=s.closest("tr").find(".sim_nbr").find(".empty"),t=s.closest("tr").find(".sim_nbr").find(".frg-select-container, .status");"0"===s.val()?($(".sim_nbr").removeClass("hide"),a.addClass("hide"),t.removeClass("hide")):(a.removeClass("hide"),t.addClass("hide")),e.setupDueNow()}),$(".frg-checkbox").click(function(){var e=$(this),s=e.find(".icon .frg-icon");s.hasClass("icon-checkmark")?s.removeClass("icon-checkmark"):s.addClass("icon-checkmark")}),$(".js-select-all").click(function(){var s=$(this),a=s.find("input[type=checkbox]"),t=a.is(":checked"),i=$(".frg-checkbox");i.each(function(){var s=$(this),a=s.find("input[type=checkbox]");s.hasClass("js-select-all")||(t?a.is(":checked")||e.selectCheckbox("select",s):a.is(":checked")&&e.selectCheckbox("deselect",s))})}),$(".edit_name").click(function(){var e=$(this),s=e.closest("p"),a=s.find(".group_name_container"),t=s.find("input");e.addClass("hide"),a.addClass("hide"),t.removeClass("hide").focus()}),$(".js-auto_save").keypress(function(s){var a=$(this),t=a.val(),i=a.closest("p"),r=i.find(".group_name_container"),n=i.find(".edit_name"),l=i.find(".group_name"),o=s.which||s.keyCode;13!=o&&9!=o||""===t||(a.addClass("hide"),n.removeClass("hide"),l.text(t),r.removeClass("hide")),e.ellipsis()}).blur(function(s){var a=$(this),t=a.val(),i=a.closest("p"),r=i.find(".group_name_container"),n=i.find(".edit_name"),l=i.find(".group_name"),o=s.which||s.keyCode;13!=o&&9!=o||""===t||(a.addClass("hide"),n.removeClass("hide"),l.text(t),r.removeClass("hide")),e.ellipsis()}),$(".plan .select").click(function(){var s=$(this),a=($(".plan"),$(".plan .frg-button.select")),t=s.closest(".plan"),i=t.find(".frg-button.select"),r=t.find("input[name=price_per_month]").val(),n=$(".monthly"),l=$("input[name=nbr_device]").val(),o=r*l;a.removeClass("current").text("Select"),i.addClass("current").text("Selected"),o=e.currencyFormat(o),n.text(o.substring(0,o.indexOf(".")))}),$(".service .select").click(function(){var e=$(this),s="Add service",a="Remove service";e.hasClass("current")?(e.removeClass("current"),e.is("input")?e.val(s):e.text(s)):(e.addClass("current"),e.is("input")?e.val(a):e.text(a))}),$(".advanced_import").click(function(){$("#myModal").modal()}),$(".js-previous").click(function(){var s=$(this),a=$(".current.page"),t=$(".current.page").prev(),i=$(".view_all");t.is("table")&&(i.addClass("hide"),t.length>0&&(a.removeClass("current").addClass("hide"),t.removeClass("hide").addClass("current")),t.prev().is("table")||s.text(" - "),e.setupPagination())}),$(".js-next").click(function(){var s=($(this),$(".current.page")),a=$(".current.page + .page"),t=$(".view_all"),i=$(".js-previous");a.is("table")&&(t.addClass("hide"),i.text("Previous 10"),a.length>0&&(s.removeClass("current").addClass("hide"),a.removeClass("hide").addClass("current")),e.setupPagination())}),$(".js-view_all").click(function(){var s=$(".page"),a=$(".page.current");if(0===a.length&&(a=$(".current")),a.is("table")){var t=$(".view_all"),i=s.find("tbody tr").clone();s.addClass("hide").removeClass("current"),t.removeClass("hide").addClass("current").find("tbody").html(i)}else s.removeClass("current").removeClass("hide");e.setupPagination()}),$(".js-phone_nbr").blur(function(){var e=$(this),s=e.closest(".input_error_tooltip"),a=!1;a||s.addClass("error")}),$(".js-quantity").keyup(function(){var e=$(this),s=e.val(),a=e.attr("data-num")||null,t=e.closest(".status"),i=t.closest(".accessory").find(".frg-button"),r=t.closest("section").closest("div").find(".frg-button.color-green"),n=parseInt(t.find(".js-max_quantity").val()),l=null!==a?$("span.status[data-num="+a+"]"):$("span.status");if($.isNumeric(s))if(s>n){var o=0===n?"sorry, this item is not available at the moment":"The quantity you are trying to order is on back order. Please try reducing the quantity until the indicator changes to available";t.removeClass("positive").addClass("negative").find(".tooltip_bubble span").text(o),i.addClass("state-disabled"),r.addClass("state-disabled"),l.removeClass("positive").addClass("negative").text("Back order")}else t.removeClass("negative").addClass("positive"),i.removeClass("state-disabled"),i.hasClass("added")?i.text("Update"):i.text("Add to cart"),r.removeClass("state-disabled").text("Add to cart"),l.removeClass("negative").addClass("positive").text("Available");else i.addClass("state-disabled"),r.addClass("state-disabled"),""!==s?(l.removeClass("positive").addClass("negative").text("Invalid entry"),t.removeClass("positive").addClass("negative").find(".tooltip_bubble span").text("please, enter a valid number")):0!==n&&(t.removeClass("negative").addClass("positive"),l.text(""))}),$(".js-validate_number").keyup(function(){var e=$(this),s=e.val(),a=e.closest(".status"),t=a.find(".tooltip_bubble span");""===s||$.isNumeric(s)?a.removeClass("negative").addClass("positive"):(a.removeClass("positive").addClass("negative"),t.text("Please, enter a valid number"))}),$(".js-form-complete").keyup(function(){e.formCompleted()}).click(function(){e.formCompleted()}),$(".existing_phone_nbr .js-phone_input_mask").blur(function(){var s=$(this);e.portabilityCheck()?s.closest(".status").removeClass("negative").addClass("positive"):s.closest(".status").removeClass("positive").addClass("negative")}),$(".js-cities-auto-complete").keyup(function(){var s=$(this),a=s.val(),t=[],i=s.parent().find(".js-auto-complete-results");if(a.length>=3)for(var r=0;r<e.cities.length;r++)-1!==e.cities[r].value.toLowerCase().indexOf(a)&&t.push(e.cities[r]);if(i.text(""),t.length>0){i.removeClass("hide");for(var r=0;r<t.length;r++)i.append('<a class="block js-auto-complete-result" data-areacodes="'+t[r].data+'" href="#">'+t[r].value+"</a>")}else i.addClass("hide");$(".js-auto-complete-result").click(function(e){var s=$(this),a=s.parent(),t=a.parent().find(".js-cities-auto-complete"),i=s.closest("tr").find(".js-area-codes"),r=s.attr("data-areacodes");e.preventDefault(),a.text("").addClass("hide"),t.val(s.text().toLowerCase()),r=r.split(","),i.text("");for(var n=0;n<r.length;n++)i.append('<option value="'+r[n]+'">'+r[n]+"</option>")})}),$(".js-cities-auto-complete").blur(function(){var s=$(this);e.callingCityCheck(s)||s.val("")}),$(".advanced_search_table input, .advanced_search_table select").keyup(function(){e.validateSearchForm()}).change(function(){e.validateSearchForm()}),$(".js-loading").click(function(){var e=$(".js-loaded-content"),s=$(".js-loading-spinner");e.addClass("hide"),s.removeClass("hide"),setTimeout(function(){e.removeClass("hide"),s.addClass("hide")},5e3)}),$(".js-phone_input_mask").keyup(function(){var e=($(this),$(".js-validated_options"));-1===$(this).val().indexOf("_")?e.removeClass("state-disabled"):e.addClass("state-disabled")}),$(".js-filter-service-category").change(function(){var e=$(this).val(),s=$(".phone");"select"===e.toLowerCase()?s.each(function(){$(this).closest(".js-element").removeClass("hide")}):s.each(function(){var s=$(this),a=s.closest(".js-element"),t=s.attr("data-filter");-1!==t.indexOf(e)?a.removeClass("hide"):a.addClass("hide")})}),$(".js-not-empty").blur(function(){var s=$(this);""===s.val()?(s.closest(".status").removeClass("positive").addClass("negative").find(".frg-icon").removeClass("icon-checkmark-inverted").addClass("icon-warning-inverted"),e.formEntriesValid=!1):(s.closest(".status").removeClass("negative").addClass("positive").find(".frg-icon").removeClass("icon-warning-inverted").addClass("icon-checkmark-inverted"),e.formEntriesValid=!0)}),$(".js-email_validation").blur(function(){var s=$(this);e.validateEmail(s.val())?(s.closest(".status").removeClass("negative").addClass("positive"),s.closest(".status").find(".frg-icon").addClass("icon-checkmark-inverted").removeClass("icon-warning-inverted"),e.formEntriesValid=!0):(s.closest(".status").removeClass("positive").addClass("negative").find(".tooltip_bubble").text("Please, enter a valid email address"),s.closest(".status").find(".frg-icon").removeClass("icon-checkmark-inverted").addClass("icon-warning-inverted"),e.formEntriesValid=!1)}),$(".js-match-validation").blur(function(){var s=$(".js-match-validation"),a=$("input[name=email2]");""!==$(s[0]).val()&&""!==$(s[1]).val()&&($(s[0]).val()!==$(s[1]).val()?(a.closest(".status").removeClass("positive").addClass("negative").find(".tooltip_bubble").text("The emails you entered do not match.").closest(".status").find(".frg-icon").removeClass("icon-checkmark-inverted").addClass("icon-warning-inverted"),e.formEntriesValid=!1):(a.closest(".status").removeClass("negative").addClass("positive").closest(".status").find(".frg-icon").addClass("icon-checkmark-inverted").removeClass("icon-warning-inverted"),e.formEntriesValid=!0))}),$(".js-required").keyup(function(s){e.checkRequiredField(s)}).change(function(s){e.checkRequiredField(s)}),$(".js-more").click(function(){var e=$(".dep_accounts");e.append('<div class="row lenght70 top_margin20"><div class="col-xs-6"><label class="block devil_gray_text">DEP number</label><input class="frg-input-field full_width" /></div><div class="col-xs-6"><label class="block devil_gray_text">Description</label><input class="frg-input-field full_width" /></div></div>')}),$(".frg-checkbox.js-pricepoint").click(function(){var e=$(this),s=$(".js-hide-not-device-only"),a=$(".js-show-not-device-only"),t=$(".changeling"),i=s.find(".js-required");e.hasClass("js-device-only")?(s.hide(),a.removeClass("hide"),t.removeClass("halfwidth").addClass("full_width"),i.removeClass("js-required").addClass("js-required-hold")):(s.show(),a.addClass("hide"),t.removeClass("full_width").addClass("halfwidth"),i.addClass("js-required").removeClass("js-required-hold"))}),$(".js-incomplete").click(function(s){var a=$(this),t="error",i="Highlighted fields are required.",r="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse fringilla scelerisque mi, eget commodo justo euismod eu. Mauris nec scelerisque tortor, vel volutpat sapien.",n=$(".error_message"),l=$(".error_message_container"),o=$(".js-required");a.hasClass("js-incomplete")&&0!==l.length&&0!==o.length&&(s.preventDefault(),0===n.length?e.checkRequiredField(s).displayErrorMessage(t,i,r).scrollTo(l,15,1e3):e.scrollTo(l,15,1e3))}),$(".js-select-at-least-one").click(function(){var e=$(".js-select-at-least-one"),s=$(".js-submit"),a=!1;e.each(function(){var e=$(this);e.find(".frg-icon").hasClass("icon-checkmark")&&(a=!0)}),a?s.removeClass("state-disabled"):s.addClass("state-disabled")}),$(".js-delete-row").click(function(){var e=$(".frg-checkbox .icon-checkmark"),s=e.closest("tr"),a=s.next();s.remove(),a.remove()}),$(".js-unique").blur(function(){e.checkForDuplicates()}),$(".js-duplicates").click(function(){var s=$(".error_message_container"),a=$(".js-unique");if(0!==s.length&&0!==a.length&&(e.checkForDuplicates(),$(this).hasClass("js-active"))){var t=$("[data-duplicate=true]"),i="error",r="there's duplicates",n="Lorem ipsum";t.addClass("js-error").addClass("show_errors"),e.displayErrorMessage(i,r,n).scrollTo(s,15,1e3)}}),$(".js-clear-cart").click(function(){$("#clearCart").modal()}),$(".js-confirm-clear-cart").click(function(){console.info("clear cart")}),$(".js-display-overlay").click(function(){e.displayOverlay($(this))}),e},start:function(){var e=this;return e.target2=$(".spinner2").get(0),e.spinner2=new Spinner(e.opts2).spin(e.target2),e.showOverlay(),e},stop:function(){var e=this;return e.hideOverlay().spinner2.stop(),e},showOverlay:function(){var e=this;return $.LoadingOverlay("show"),e},hideOverlay:function(){var e=this;return $.LoadingOverlay("hide"),e},selectCheckbox:function(e,s){"select"===e?s.find("input[type=checkbox]").prop("checked",!0).closest(".inner").find(".frg-icon").addClass("icon-checkmark"):"deselect"===e&&s.find("input[type=checkbox]").prop("checked",!1).closest(".inner").find(".frg-icon").removeClass("icon-checkmark")},scrollTo:function(e,s,a){$("html, body").animate({scrollTop:e.offset().top-s},a)},checkForDuplicates:function(){var e=this,s=$(".js-unique"),a=$(".frg-button"),t=!1,i=0;return s.removeAttr("data-duplicate"),s.each(function(){var e=$(this),a=0,r=0;s.each(function(){var s=$(this);""!==e.val()&&""!==s.val()&&e.val()===s.val()&&i!==r&&(a++,e.attr("data-duplicate","true"),s.attr("data-duplicate","true")),r++}),i++,a>0&&(t=!0)}),t?a.addClass("js-active"):a.removeClass("js-active"),e},checkRequiredField:function(e){var s=this,a=$(e.target).closest(".js-all-required-fields").length>0?$(e.target).closest(".js-all-required-fields"):$(".js-all-required-fields"),t=a.hasClass("disable"),i=a.find(".js-required"),r=a.find(".js-submit"),n=!0,l=a.find("input[type=radio].js-required"),o=!(l.length>0),c=$(".error_message_container");return c.empty(),i.removeClass("js-error").removeClass("show_errors").each(function(){var e=$(this);l.each(function(){$(this).is(":checked")&&(o=!0)}),null===e.val()||""===e.val()||"select"===e.val().toLowerCase()||-1!==e.val().indexOf("_")?(n=!1,e.addClass("js-error")):e.hasClass("js-quantity")&&e.parent().hasClass("status")&&e.parent().hasClass("negative")&&(n=!1,e.addClass("js-error"))}),n&&o&&s.formEntriesValid?(t?r.removeClass("state-disabled"):r.removeClass("js-incomplete"),c.empty()):t?r.addClass("state-disabled"):r.addClass("js-incomplete"),s},validateSearchForm:function(){var e=$(".advanced_search_table input, .advanced_search_table select"),s=$(".advanced_search_table .status"),a=$(".advanced_search_table .frg-button"),t=!1;e.each(function(){""!==$(this).val()&&"Select"!==$(this).val()&&(t=!0)}),s.each(function(){$(this).hasClass("negative")&&(t=!1)}),t?a.removeClass("state-disabled"):a.addClass("state-disabled")},portabilityCheck:function(){return!1},callingCityCheck:function(e){for(var s=this,a=e.val(),t=0;t<s.cities.length;t++)if(a.toLowerCase()===s.cities[t].value.toLowerCase())return!0;return!1},autoSave:function(e){var s=$(this),a=s.val(),t=s.closest("p"),i=t.find(".edit_name"),r=t.find("span, strong"),n=e.which||e.keyCode;13!=n&&9!=n||""===a||(s.addClass("hide"),i.removeClass("hide"),r.text(a).removeClass("hide"))},formCompleted:function(){var e=$(".js-form-complete"),s=!0,a=!1,t=$(".frg-button");e.each(function(){var e=$(this);"text"===e.attr("type")&&(""!==e.val()&&-1===e.val().indexOf("_")||(s=!1)),"radio"===e.attr("type")&&e.is(":checked")&&(a=!0)}),s||a?t.removeClass("state-disabled"):t.addClass("state-disabled")},setupFilters:function(){var e=this;return $(".js-filter").click(function(){var s=$(this),a=$("nav ul li .js-filter"),t=$(".js-applied_filter");s.hasClass("btn")||(a.removeClass("current"),s.addClass("current"));var i=$("nav ul li .js-filter.current"),r=i.attr("data-filter"),n=i.attr("data-specific-spelling"),l=void 0!==n?n:e.capitalizeFirstLetter(r.replace("_"," ")),o=$(".js-filter.btn.current"),c=1===o.length?o.attr("data-filter"):null,d=$(".object");"plans"===e.currentPage||"devices"===e.currentPage||"upgrades_devices"===e.currentPage||"upgrades_plans"===e.currentPage?d.closest(".js-element").show():d.show(),t.text(l),d.each(function(){var s=$(this);"all"===r?null!==c&&-1!==s.attr("data-filter").indexOf(c)?"plans"===e.currentPage||"devices"===e.currentPage||"upgrades_devices"===e.currentPage||"upgrades_plans"===e.currentPage?s.closest(".js-element").show():s.show():null!==c&&-1===s.attr("data-filter").indexOf(c)?"plans"===e.currentPage||"devices"===e.currentPage||"upgrades_devices"===e.currentPage||"upgrades_plans"===e.currentPage?s.closest(".js-element").hide():s.hide():null===c&&("plans"===e.currentPage||"devices"===e.currentPage||"upgrades_devices"===e.currentPage||"upgrades_plans"===e.currentPage?s.closest(".js-element").show():s.show()):(-1===s.attr("data-filter").indexOf(r)||null!==c&&-1===s.attr("data-filter").indexOf(c))&&("plans"===e.currentPage||"devices"===e.currentPage||"upgrades_devices"===e.currentPage||"upgrades_plans"===e.currentPage?s.closest(".js-element").hide():s.hide())}),"accessories"===e.currentPage&&e.rearrangeSeparators()}),e},getFile:function(){$(".upfile").click()},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},rearrangeSeparators:function(){$(".object").removeClass("separator").addClass("separator"),$(".object:visible:first").removeClass("separator"),$(".object:visible").each(function(e){e%3===0&&$(this).removeClass("separator")})},sortTable:function(e,s){var a,t,i,r,n=document.getElementById("sortable"),l=n.rows,o=l.length,c=new Array;for(a=0;o>a;a++)for(i=l[a].cells,r=i.length,c[a]=new Array,t=0;r>t;t++)c[a][t]=i[t].innerHTML;for(c.sort(function(a,t){return a[e].toLowerCase()==t[e].toLowerCase()?0:a[e].toLowerCase()>t[e].toLowerCase()?s:-1*s}),a=0;o>a;a++)l[a].innerHTML="<td>"+c[a].join("</td><td>")+"</td>"},displayErrorMessage:function(e,s,a){var t=this,i=$(".error_message_container"),r=$(".js-error"),n=null;switch(e){case"error":case"warning":n="icon-warning-inverted"}return i.append('<div class="error_message bottom_margin20 '+e+' clearfix"><a class="close right" href="#"><span class="frg-icon icon-x-circled"></span></a><div class="content clearfix"><div class="frg-icon '+n+' left"></div><div class="text left"><div class="h3 title"><strong>'+s+'</strong></div><span class="text">'+a+"</span></div></div></div>"),r.addClass("show_errors"),$(".error_message .close").click(function(){$(this).closest(".error_message").fadeOut()}),t},showFakeLinks:function(){var e=this;return $('a[href="#"]').css(e.highlight),e},stickyFooter:function(){function e(){s=t.height(),footerTopInt=$(window).scrollTop()+$(window).height()-s,a=footerTopInt+"px";footerTopInt<i?t.addClass("sticky"):t.removeClass("sticky")}var s=0,a=0,t=$(".stickyFooter"),i=t.length?t[0].offsetTop:null;null!==i&&e(),$(window).scroll(e).resize(e)},getPhones:function(){var e=this;return"devices"===e.currentPage&&$.ajax({url:"http://www.telus.com/services/cms/page/"+e.lang+"/bc/mobility/devices"}).done(function(s){e.phones=s.devices,$.each(e.phones,function(s,a){var t="";t+='<div class="box phone object clearfix left" data-filter="all voice_only">',t+='	<div class="image left">',t+='		<a href="device.php">';for(var s=0;s<a.variants.length;s++){var i=0===s?"":" hide";t+='			<img class="js-'+a.variants[s].id+i+'" src="'+a.variants[s].image_url+'" alt="'+a.variants[s].color_name+'" />'}t+="		</a>",t+='		<div class="device__variant-container">';for(var s=0;s<a.variants.length;s++)t+='			<button class="device-color-button device__variant-item" data-lang="en" data-sku="'+a.variants[s].id+'" aria-label="'+a.variants[s].color_name+'">',t+='				<span class="frg-icon icon-circle-solid" style="color: '+a.variants[s].color_hex+'"></span>',t+="			</button>";t+="		</div>",t+="	</div>",t+='	<div class="description right">',t+='		<div class="name">',t+="			<div>",t+='				<h6><a href="device.php">'+a.name+"</a></h6>",t+="			</div>",t+='			<div class="status positive">Available</div>',t+="		</div>",t+='		<div class="prices">',t+='			<div class="no-term left">',t+="				<h4>$200</h4>",t+='				<span class="time_period">No term</span>',t+="			</div>",t+='			<div class="long-term right">',t+="				<h4>$50</h4>",t+='				<span class="time_period">3-year term</span>',t+="			</div>",t+='			<div class="clear"></div>',t+="		</div>",t+='		<div class="mtm">',t+='			<div class="gray_text">$230 Monthly</div>',t+='			<a class="frg-button" href="device.php">Select</a>',t+="		</div>",t+="	</div>",t+='	<div class="clear"></div>',t+="</div>",$(".phones").append(t),e.showVariants()})}),e},showVariants:function(){var e=this;return $(".device-color-button").click(function(){var e=$(this),s=e.attr("data-sku"),a=e.closest(".image, .object"),t=a.find(".js-"+s),i=a.find("img");i.addClass("hide"),t.removeClass("hide")}),e},setupPagination:function(){var e=this,s=$(".paging_display"),a=s.find(".from"),t=s.find(".to"),i=$(".js-next"),r=null,n=s.find(".total"),l=$(".page"),o=l.find("tbody tr"),c=$(".page.current");return 0===c.length&&(c=$(".view_all.current")),a.text(parseInt(c.attr("data-from"))+1),t.text(parseInt(c.attr("data-from"))+c.find("tbody tr").length),n.text(o.length),r=parseInt(n.text())-parseInt(t.text())>10?10:parseInt(n.text())-parseInt(t.text()),r>0?i.text("Next "+r):i.text(" - "),e},ellipsis:function(){var e=this,s=$(".js-ellipsis");return s.each(function(){var e=$(this),s=e.attr("data-maxlen");e.text().trim().length>s&&e.text(e.text().trim().substr(0,parseInt(s)-3)+"...")}),e},setupDueNow:function(){var e=this,s=parseInt($("[name=base_total]").val()),a=$(".sim select"),t=0,i=$("p.now");return a.each(function(){t+=parseInt($(this).val())}),$.isNumeric(s)&&$.isNumeric(t)&&i.text(e.currencyFormat(s+t)),e},currencyFormat:function(e){return"$"+parseFloat(e,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()},validateEmail:function(e){var s=/^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;return s.test(e)},setupInputMasks:function(){var e=this;return $.mask.definitions["~"]="[+-]",$(".js-phone_input_mask").mask("?(999) 999-9999"),$(".js-postalcode_input_mask").mask("a9a 9a9"),e},displayOverlay:function(e){var s=this;return s.start(),$.ajax().done(function(a){var t=e.closest(".bottom_section"),i=t.find(".js-quantity").val();$.isNumeric(i)&&i>0?e.addClass("current").addClass("added").text("Update"):$.isNumeric(i)&&0==i&&e.removeClass("current").removeClass("added").text("Add to cart"),s.stop()}),s},check_image_availability:function(){var e=this,s=$(".js-check-availability"),a="img/no-image-available.jpg";return s.each(function(){var e=$(this);$.get(e.attr("src")).fail(function(){e.attr("src",a).addClass("replacement_img")})}),e}};