var JAG={currentPage:null,highlight:{border:"thin solid red"},lang:$("html").attr("lang"),phones:null,cities:cities,formEntriesValid:!0,opts2:{color:"#4B286D",top:"5%",left:"5%",lines:13,length:25,width:10,radius:40,corners:1,rotate:0,speed:1,trail:80,shadow:!1,hwaccel:!1,className:"spinner2",zIndex:2e9},target2:null,spinner2:null,environment:null,init:function(){var e=this;return e.setEnvironment().setupCurrentPage().showVariants().attachEvents().setupPagination().ellipsis().setupDueNow().setupInputMasks(),"corporate_settings"===e.currentPage&&e.setupTabs(),"devices"!==e.currentPage&&"device"!==e.currentPage&&"accessories"!==e.currentPage||e.check_image_availability(),e},setEnvironment:function(){var e=this,t=$(location).attr("href");return t.indexOf("localhost")!=-1?e.environment="local":t.indexOf("webmediasolutionz")!=-1?e.environment="staging":e.environment="production",e},setupCurrentPage:function(){var e=this;return e.currentPage=$("html").attr("data-currentpage"),e},setupTabs:function(){var e=this;return $("#tab-container").easytabs({animate:!1}),e},attachEvents:function(){var e=this;return $(".menu").dropit().find(".hide").removeClass("hide"),$(".slider").slick({vertical:!0}),$(".datepicker").datepicker(),$("#myModal").on("shown.bs.modal",function(){$("#myInput").focus()}),$('a[href="#"]').click(function(e){e.preventDefault()}),e.stickyFooter(),$(".error_message .close").click(function(){$(this).closest(".error_message").fadeOut()}),$(".toggle_panel").click(function(){var e=$(this),t=e.attr("data-section"),s=e.closest(".outer-container").find(".advanced_search_table"),a=s.find("input"),i=(s.find(".frg-button"),!1);a.each(function(){var e=$(this);e.val().length>0&&(i=!0)}),t=void 0===t?".advanced_search_table":"."+t,e.hasClass("icon-plus-inverted")?e.closest(".advanced_search").find(".icon-plus-inverted").removeClass("icon-plus-inverted").addClass("icon-minus-inverted"):e.hasClass("icon-minus-inverted")&&e.closest(".advanced_search").find(".icon-minus-inverted").removeClass("icon-minus-inverted").addClass("icon-plus-inverted"),$(t).hasClass("open")?$(t).addClass("hide").addClass("closed").removeClass("open"):$(t).hasClass("closed")&&$(t).removeClass("hide").removeClass("closed").addClass("open")}),$(".js-show_list").click(function(){var e=$(this),t=e.text(),s=e.closest("tr").index(),s=parseInt(s)+2;switch(t){case"View list":t="Hide list",e.closest("tbody").find("tr:nth-child( "+s+" )").removeClass("hide").find("div").removeClass("hide"),$(".js-hide_subscribers_list").click(function(){var e=$(this),t=e.closest("tr").index(),t=parseInt(t);$(this).closest(".subscriber_list").addClass("hide").closest("tr").addClass("hide"),e.closest("tbody").find("tr:nth-child( "+t+" )").find(".js-show_list").text("View list")});break;case"Hide list":t="View list",e.closest("tbody").find("tr:nth-child( "+s+" )").addClass("hide").find("div").addClass("hide")}e.text(t)}),$(".btn_group .btn").click(function(){var e=$(this),t=e.closest(".btn_group").find(".btn");t.removeClass("current"),e.addClass("current")}),$(".js-sort").click(function(){var t=$(this),s=t.closest("div").find(".js-sort.frg-icon"),a=null,i=s.attr("data-field");s.addClass("holdup"),$(".js-sort.frg-icon").not(".holdup").removeClass("icon-arrow-up").addClass("icon-arrow-down"),s.hasClass("icon-arrow-down")?(s.removeClass("icon-arrow-down").removeClass("holdup").addClass("icon-arrow-up"),a=-1):s.hasClass("icon-arrow-up")&&(s.removeClass("icon-arrow-up").removeClass("holdup").addClass("icon-arrow-down"),a=1),e.sortTable(i,a)}),e.setupFilters(),$(".js-sort-by").change(function(){var e=$(this).val();$("nav.filter_nav").addClass("hide"),$("nav.filter_nav."+e).removeClass("hide")}),$(".browse_files .frg-input-field, .browse_files .frg-button").click(function(){e.getFile()}),$(".js-view_more").click(function(){var e=$(this),t=e.closest("div").find("ul");e.hasClass("closed")?(t.show("slow"),e.removeClass("closed").addClass("open").find(".text").text("Hide all").closest(".js-view_more").find(".frg-icon").addClass("icon-minus-circled").removeClass("icon-plus-circled")):e.hasClass("open")&&(t.hide("slow"),e.removeClass("open").addClass("closed").find(".text").text("View all").closest(".js-view_more").find(".frg-icon").addClass("icon-plus-circled").removeClass("icon-minus-circled"))}),$(".port select").change(function(){var e=$(this),t=e.closest("tr"),s=t.find(".account_nbr").find(".empty"),a=t.find(".account_nbr").find("input"),i=t.find(".existing_phone_nbr").find(".empty"),r=t.find(".existing_phone_nbr").find(".status"),n=t.find(".js-calling-city").find(".empty"),l=t.find(".js-calling-city").find("input"),o=t.find(".js-preferred-area-code").find(".empty"),c=t.find(".js-preferred-area-code").find(".frg-select-container");"yes"===e.val()?($(".account_nbr").removeClass("hide"),$(".existing_phone_nbr").removeClass("hide"),s.addClass("hide"),i.addClass("hide"),a.removeClass("hide"),r.removeClass("hide"),n.removeClass("hide"),l.addClass("hide"),o.removeClass("hide"),c.addClass("hide")):"no"===e.val()&&(s.removeClass("hide"),i.removeClass("hide"),a.addClass("hide"),r.addClass("hide"),n.addClass("hide"),l.removeClass("hide"),o.addClass("hide"),c.removeClass("hide"))}),$(".sim select").change(function(){var t=$(this),s=t.closest("tr").find(".sim_nbr").find(".empty"),a=t.closest("tr").find(".sim_nbr").find(".frg-select-container, .status");"0"===t.val()?($(".sim_nbr").removeClass("hide"),s.addClass("hide"),a.removeClass("hide")):(s.removeClass("hide"),a.addClass("hide")),e.setupDueNow()}),$(".frg-checkbox input[type=checkbox]").click(function(){var e=$(this).closest(".frg-checkbox"),t=e.find(".icon .frg-icon");t.hasClass("icon-checkmark")?t.removeClass("icon-checkmark"):t.addClass("icon-checkmark")}),"production"!=e.environment&&$(".frg-checkbox.parent input[type=checkbox]").click(function(){var e=$(this),t=e.is(":checked"),s=e.closest("tr").next().find(".frg-checkbox input[type=checkbox]");s.each(function(){var e=$(this);t?e.is(":checked")&&e.trigger("click"):e.is(":checked")||e.trigger("click")})}),$(".js-select-all").click(function(){var t=$(this),s=t.find("input[type=checkbox]"),a=s.is(":checked"),i=$(".frg-checkbox");i.each(function(){var t=$(this),s=t.find("input[type=checkbox]");t.hasClass("js-select-all")||(a?s.is(":checked")||e.selectCheckbox("select",t):s.is(":checked")&&e.selectCheckbox("deselect",t))})}),$(".edit_name").click(function(){var e=$(this),t=e.closest("p"),s=t.find(".group_name_container"),a=t.find("input");e.addClass("hide"),s.addClass("hide"),a.removeClass("hide").focus()}),$(".js-auto_save").keypress(function(t){var s=$(this),a=s.val(),i=s.closest("p"),r=i.find(".group_name_container"),n=i.find(".edit_name"),l=t.which||t.keyCode;13!=l&&9!=l||""===a||(s.addClass("hide"),n.removeClass("hide"),r.text(a).attr("fullname",a).removeClass("hide")),e.ellipsis()}).blur(function(t){var s=$(this),a=s.val(),i=s.closest("p"),r=i.find(".group_name_container"),n=i.find(".edit_name"),l=t.which||t.keyCode;13!=l&&9!=l||""===a||(s.addClass("hide"),n.removeClass("hide"),r.text(a).attr("fullname",a).removeClass("hide")),e.ellipsis()}),$(".plan .select").click(function(){var t=$(this),s=($(".plan"),$(".plan .frg-button.select")),a=t.closest(".plan"),i=a.find(".frg-button.select"),r=a.find("input[name=price_per_month]").val(),n=$(".monthly"),l=$("input[name=nbr_device]").val(),o=r*l;s.removeClass("current").text("Select"),i.addClass("current").text("Selected"),o=e.currencyFormat(o),n.text(o.substring(0,o.indexOf(".")))}),$(".service .select").click(function(){var e=$(this),t="Add service",s="Remove service";e.hasClass("current")?(e.removeClass("current"),e.is("input")?e.val(t):e.text(t)):(e.addClass("current"),e.is("input")?e.val(s):e.text(s))}),$(".advanced_import").click(function(){$("#myModal").modal()}),$(".js-previous").click(function(){var t=$(this),s=$(".current.page"),a=$(".current.page").prev(),i=$(".view_all");a.is("table")&&(i.addClass("hide"),a.length>0&&(s.removeClass("current").addClass("hide"),a.removeClass("hide").addClass("current")),a.prev().is("table")||t.text(" - "),e.setupPagination())}),$(".js-next").click(function(){var t=($(this),$(".current.page")),s=$(".current.page + .page"),a=$(".view_all"),i=$(".js-previous");s.is("table")&&(a.addClass("hide"),i.text("Previous 10"),s.length>0&&(t.removeClass("current").addClass("hide"),s.removeClass("hide").addClass("current")),e.setupPagination())}),$(".js-view_all").click(function(){var t=$(".page"),s=$(".page.current");if(0===s.length&&(s=$(".current")),s.is("table")){var a=$(".view_all"),i=t.find("tbody tr").clone();t.addClass("hide").removeClass("current"),a.removeClass("hide").addClass("current").find("tbody").html(i)}else t.removeClass("current").removeClass("hide");e.setupPagination()}),$(".js-phone_nbr").blur(function(){var e=$(this),t=e.closest(".input_error_tooltip"),s=!1;s||t.addClass("error")}),$(".js-quantity").keyup(function(){var e=$(this),t=e.val(),s=e.attr("data-num")||null,a=e.closest(".status"),i=a.closest(".accessory").find(".frg-button"),r=a.closest("section").closest("div").find(".frg-button.color-green"),n=parseInt(a.find(".js-max_quantity").val()),l=null!==s?$("span.status[data-num="+s+"]"):$("span.status");if($.isNumeric(t))if(t>n){var o=0===n?"sorry, this item is not available at the moment":"The quantity you are trying to order is on back order. Please try reducing the quantity until the indicator changes to available";a.removeClass("positive").addClass("negative").find(".tooltip_bubble span").text(o),i.addClass("state-disabled"),r.addClass("state-disabled"),l.removeClass("positive").addClass("negative").text("Back order")}else a.removeClass("negative").addClass("positive"),i.removeClass("state-disabled"),i.hasClass("added")?i.text("Update"):i.text("Add to cart"),r.removeClass("state-disabled").text("Add to cart"),l.removeClass("negative").addClass("positive").text("Available");else i.addClass("state-disabled"),r.addClass("state-disabled"),""!==t?(l.removeClass("positive").addClass("negative").text("Invalid entry"),a.removeClass("positive").addClass("negative").find(".tooltip_bubble span").text("please, enter a valid number")):0!==n&&(a.removeClass("negative").addClass("positive"),l.text(""))}),$(".js-validate_number").keyup(function(){var e=$(this),t=e.val(),s=e.closest(".status"),a=s.find(".tooltip_bubble span");""===t||$.isNumeric(t)?s.removeClass("negative").addClass("positive"):(s.removeClass("positive").addClass("negative"),a.text("Please, enter a valid number"))}),$(".js-form-complete").keyup(function(){e.formCompleted()}).click(function(){e.formCompleted()}),$(".existing_phone_nbr .js-phone_input_mask").blur(function(){var t=$(this);e.portabilityCheck()?t.closest(".status").removeClass("negative").addClass("positive"):t.closest(".status").removeClass("positive").addClass("negative")}),$(".js-cities-auto-complete").keyup(function(){var t=$(this),s=t.val(),a=[],i=t.parent().find(".js-auto-complete-results");if(s.length>=3)for(var r=0;r<e.cities.length;r++)e.cities[r].value.toLowerCase().indexOf(s)!==-1&&a.push(e.cities[r]);if(i.text(""),a.length>0){i.removeClass("hide");for(var r=0;r<a.length;r++)i.append('<a class="block js-auto-complete-result" data-areacodes="'+a[r].data+'" href="#">'+a[r].value+"</a>")}else i.addClass("hide");$(".js-auto-complete-result").click(function(e){var t=$(this),s=t.parent(),a=s.parent().find(".js-cities-auto-complete"),i=t.closest("tr").find(".js-area-codes"),r=t.attr("data-areacodes");e.preventDefault(),s.text("").addClass("hide"),a.val(t.text().toLowerCase()),r=r.split(","),i.text("");for(var n=0;n<r.length;n++)i.append('<option value="'+r[n]+'">'+r[n]+"</option>")})}),$(".js-cities-auto-complete").blur(function(){var t=$(this);e.callingCityCheck(t)||t.val("")}),$(".advanced_search_table input, .advanced_search_table select").keyup(function(){e.validateSearchForm()}).change(function(){e.validateSearchForm()}),$(".js-loading").click(function(){var e=$(".js-loaded-content"),t=$(".js-loading-spinner");e.addClass("hide"),t.removeClass("hide"),setTimeout(function(){e.removeClass("hide"),t.addClass("hide")},5e3)}),$(".js-phone_input_mask").keyup(function(){var e=($(this),$(".js-validated_options"));$(this).val().indexOf("_")===-1?e.removeClass("state-disabled"):e.addClass("state-disabled")}),$(".js-filter-service-category").change(function(){var e=$(this).val(),t=$(".phone");"select"===e.toLowerCase()?t.each(function(){$(this).closest(".js-element").removeClass("hide")}):t.each(function(){var t=$(this),s=t.closest(".js-element"),a=t.attr("data-filter");a.indexOf(e)!==-1?s.removeClass("hide"):s.addClass("hide")})}),$(".js-not-empty").blur(function(){var t=$(this);""===t.val()?(t.closest(".status").removeClass("positive").addClass("negative").find(".frg-icon").removeClass("icon-checkmark-inverted").addClass("icon-warning-inverted"),e.formEntriesValid=!1):(t.closest(".status").removeClass("negative").addClass("positive").find(".frg-icon").removeClass("icon-warning-inverted").addClass("icon-checkmark-inverted"),e.formEntriesValid=!0)}),$(".js-email_validation").blur(function(){var t=$(this);e.validateEmail(t.val())?(t.closest(".status").removeClass("negative").addClass("positive"),t.closest(".status").find(".frg-icon").addClass("icon-checkmark-inverted").removeClass("icon-warning-inverted"),e.formEntriesValid=!0):(t.closest(".status").removeClass("positive").addClass("negative").find(".tooltip_bubble").text("Please, enter a valid email address"),t.closest(".status").find(".frg-icon").removeClass("icon-checkmark-inverted").addClass("icon-warning-inverted"),e.formEntriesValid=!1)}),$(".js-match-validation").blur(function(){var t=$(".js-match-validation"),s=$("input[name=email2]");""!==$(t[0]).val()&&""!==$(t[1]).val()&&($(t[0]).val()!==$(t[1]).val()?(s.closest(".status").removeClass("positive").addClass("negative").find(".tooltip_bubble").text("The emails you entered do not match.").closest(".status").find(".frg-icon").removeClass("icon-checkmark-inverted").addClass("icon-warning-inverted"),e.formEntriesValid=!1):(s.closest(".status").removeClass("negative").addClass("positive").closest(".status").find(".frg-icon").addClass("icon-checkmark-inverted").removeClass("icon-warning-inverted"),e.formEntriesValid=!0))}),$(".js-required").keyup(function(t){e.checkRequiredField(t)}).change(function(t){e.checkRequiredField(t)}),$(".js-more").click(function(){var e=$(".dep_accounts");e.append('<div class="row lenght70 top_margin20"><div class="col-xs-6"><label class="block devil_gray_text">DEP number</label><input class="frg-input-field full_width" /></div><div class="col-xs-6"><label class="block devil_gray_text">Description</label><input class="frg-input-field full_width" /></div></div>')}),$(".frg-checkbox.js-pricepoint").click(function(){var e=$(this),t=$(".js-hide-not-device-only"),s=$(".js-show-not-device-only"),a=$(".changeling"),i=t.find(".js-required");e.hasClass("js-device-only")?(t.hide(),s.removeClass("hide"),a.removeClass("halfwidth").addClass("full_width"),i.removeClass("js-required").addClass("js-required-hold")):(t.show(),s.addClass("hide"),a.removeClass("full_width").addClass("halfwidth"),i.addClass("js-required").removeClass("js-required-hold"))}),$(".js-incomplete").click(function(t){var s=$(this),a="error",i="Highlighted fields are required.",r="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse fringilla scelerisque mi, eget commodo justo euismod eu. Mauris nec scelerisque tortor, vel volutpat sapien.",n=$(".error_message"),l=$(".error_message_container"),o=$(".js-required");s.hasClass("js-incomplete")&&0!==l.length&&0!==o.length&&(t.preventDefault(),0===n.length?e.checkRequiredField(t).displayErrorMessage(a,i,r).scrollTo(l,15,1e3):e.scrollTo(l,15,1e3))}),$(".js-select-at-least-one").click(function(){var e=$(".js-select-at-least-one"),t=$(".js-submit"),s=!1;e.each(function(){var e=$(this);e.find(".frg-icon").hasClass("icon-checkmark")&&(s=!0)}),s?t.removeClass("state-disabled"):t.addClass("state-disabled")}),$(".js-delete-row").click(function(){var e=$(".frg-checkbox .icon-checkmark"),t=e.closest("tr"),s=t.next();t.remove(),s.remove()}),$(".js-unique").blur(function(){e.checkForDuplicates()}),$(".js-duplicates").click(function(){var t=$(".error_message_container"),s=$(".js-unique");if(0!==t.length&&0!==s.length&&(e.checkForDuplicates(),$(this).hasClass("js-active"))){var a=$("[data-duplicate=true]"),i="error",r="there's duplicates",n="Lorem ipsum";a.addClass("js-error").addClass("show_errors"),e.displayErrorMessage(i,r,n).scrollTo(t,15,1e3)}}),$(".js-clear-cart").click(function(){$("#clearCart").modal()}),$(".js-confirm-clear-cart").click(function(){console.info("clear cart")}),$(".js-display-overlay").click(function(){e.displayOverlay($(this))}),$(".js-display-spinner").click(function(){e.start()}),$(".js-ellipsis").click(function(){e.showFullName($(this))}),$(".js-copy_row input[type=checkbox]").click(function(){var e=$(this);if(e.is(":checked")){var t=e.closest("td"),s=t.find(".frg-select-container select"),a=t.find(".frg-input-field"),i=$(".frg-select-container select"),r=$(".frg-input-field");i.each(function(){$(this).val(s.val())}),r.each(function(){$(this).val(a.val())})}}),$(".search_field").keyup(function(){var e=$(this).val(),t=$(".establishment");t.each(function(){var t=$(this);t.text().toLowerCase().indexOf(e)===-1?t.parent().hide():t.parent().show()})}),$(".jsChangeCategory").click(function(){var e=$(this),t=$(".jsChangeCategory"),s=e.attr("data-link"),a=$("section[data-category]");e.hasClass("ctx-active")||(t.removeClass("ctx-active"),e.addClass("ctx-active")),a.hide(),$("section[data-category="+s+"]").show()}),e},start:function(){var e=this;return e.target2=$(".spinner2").get(0),e.spinner2=new Spinner(e.opts2).spin(e.target2),e.showOverlay(),e},stop:function(){var e=this;return e.hideOverlay().spinner2.stop(),e},showOverlay:function(){var e=this;return $.LoadingOverlay("show"),e},hideOverlay:function(){var e=this;return $.LoadingOverlay("hide"),e},startSpinner:function(){var e=this;return $.LoadingOverlay("show"),e},stopSpinner:function(){var e=this;return $.LoadingOverlay("hide"),e},selectCheckbox:function(e,t){"select"===e?t.find("input[type=checkbox]").prop("checked",!0).closest(".inner").find(".frg-icon").addClass("icon-checkmark"):"deselect"===e&&t.find("input[type=checkbox]").prop("checked",!1).closest(".inner").find(".frg-icon").removeClass("icon-checkmark")},scrollTo:function(e,t,s){$("html, body").animate({scrollTop:e.offset().top-t},s)},checkForDuplicates:function(){var e=this,t=$(".js-unique"),s=$(".frg-button"),a=!1,i=0;return t.removeAttr("data-duplicate"),t.each(function(){var e=$(this),s=0,r=0;t.each(function(){var t=$(this);""!==e.val()&&""!==t.val()&&e.val()===t.val()&&i!==r&&(s++,e.attr("data-duplicate","true"),t.attr("data-duplicate","true")),r++}),i++,s>0&&(a=!0)}),a?s.addClass("js-active"):s.removeClass("js-active"),e},checkRequiredField:function(e){var t=this,s=$(e.target).closest(".js-all-required-fields").length>0?$(e.target).closest(".js-all-required-fields"):$(".js-all-required-fields"),a=s.hasClass("disable"),i=s.find(".js-required"),r=s.find(".js-submit"),n=!0,l=s.find("input[type=radio].js-required"),o=!(l.length>0),c=$(".error_message_container");return c.empty(),i.removeClass("js-error").removeClass("show_errors").each(function(){var e=$(this);l.each(function(){var e=$(this).attr("name"),t=s.find("input[name="+e+"]"),a=!1;t.each(function(){$(this).is(":checked")&&(a=!0)}),a||(t.addClass("js-error"),o=!1)}),null===e.val()||""===e.val()||e.val().toLowerCase().indexOf("select")!==-1||e.val().indexOf("_")!==-1?(n=!1,e.addClass("js-error")):e.hasClass("js-quantity")&&e.parent().hasClass("status")&&e.parent().hasClass("negative")&&(n=!1,e.addClass("js-error"))}),n&&o&&t.formEntriesValid?(a?r.removeClass("state-disabled"):r.removeClass("js-incomplete"),c.empty()):a?r.addClass("state-disabled"):r.addClass("js-incomplete"),t},validateSearchForm:function(){var e=$(".advanced_search_table input, .advanced_search_table select"),t=$(".advanced_search_table .status"),s=$(".advanced_search_table .frg-button"),a=!1;e.each(function(){""!==$(this).val()&&"Select"!==$(this).val()&&(a=!0)}),t.each(function(){$(this).hasClass("negative")&&(a=!1)}),a?s.removeClass("state-disabled"):s.addClass("state-disabled")},portabilityCheck:function(){return!1},callingCityCheck:function(e){for(var t=this,s=e.val(),a=0;a<t.cities.length;a++)if(s.toLowerCase()===t.cities[a].value.toLowerCase())return!0;return!1},autoSave:function(e){var t=$(this),s=t.val(),a=t.closest("p"),i=a.find(".edit_name"),r=a.find("span, strong"),n=e.which||e.keyCode;13!=n&&9!=n||""===s||(t.addClass("hide"),i.removeClass("hide"),r.text(s).removeClass("hide"))},formCompleted:function(){var e=$(".js-form-complete"),t=!0,s=!1,a=$(".frg-button");e.each(function(){var e=$(this);"text"===e.attr("type")&&(""!==e.val()&&e.val().indexOf("_")===-1||(t=!1)),"radio"===e.attr("type")&&e.is(":checked")&&(s=!0)}),t||s?a.removeClass("state-disabled"):a.addClass("state-disabled")},setupFilters:function(){var e=this;return $(".js-filter").click(function(){var t=$(this),s=$("nav ul li .js-filter"),a=$(".js-applied_filter");t.hasClass("btn")||(s.removeClass("current"),t.addClass("current"));var i=$("nav ul li .js-filter.current"),r=i.attr("data-filter"),n=i.attr("data-specific-spelling"),l=void 0!==n?n:e.capitalizeFirstLetter(r.replace("_"," ")),o=$(".js-filter.btn.current"),c=1===o.length?o.attr("data-filter"):null,d=$(".object");"plans"===e.currentPage||"devices"===e.currentPage||"upgrades_devices"===e.currentPage||"upgrades_plans"===e.currentPage?d.closest(".js-element").show():d.show(),a.text(l),d.each(function(){var t=$(this);"all"===r?null!==c&&t.attr("data-filter").indexOf(c)!==-1?"plans"===e.currentPage||"devices"===e.currentPage||"upgrades_devices"===e.currentPage||"upgrades_plans"===e.currentPage?t.closest(".js-element").show():t.show():null!==c&&t.attr("data-filter").indexOf(c)===-1?"plans"===e.currentPage||"devices"===e.currentPage||"upgrades_devices"===e.currentPage||"upgrades_plans"===e.currentPage?t.closest(".js-element").hide():t.hide():null===c&&("plans"===e.currentPage||"devices"===e.currentPage||"upgrades_devices"===e.currentPage||"upgrades_plans"===e.currentPage?t.closest(".js-element").show():t.show()):(t.attr("data-filter").indexOf(r)===-1||null!==c&&t.attr("data-filter").indexOf(c)===-1)&&("plans"===e.currentPage||"devices"===e.currentPage||"upgrades_devices"===e.currentPage||"upgrades_plans"===e.currentPage?t.closest(".js-element").hide():t.hide())}),"accessories"===e.currentPage&&e.rearrangeSeparators()}),e},getFile:function(){$(".upfile").click()},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},rearrangeSeparators:function(){$(".object").removeClass("separator").addClass("separator"),$(".object:visible:first").removeClass("separator"),$(".object:visible").each(function(e){e%3===0&&$(this).removeClass("separator")})},sortTable:function(e,t){var s,a,i,r,n=document.getElementById("sortable"),l=n.rows,o=l.length,c=new Array;for(s=0;s<o;s++)for(i=l[s].cells,r=i.length,c[s]=new Array,a=0;a<r;a++)c[s][a]=i[a].innerHTML;for(c.sort(function(s,a){return s[e].toLowerCase()==a[e].toLowerCase()?0:s[e].toLowerCase()>a[e].toLowerCase()?t:-1*t}),s=0;s<o;s++)l[s].innerHTML="<td>"+c[s].join("</td><td>")+"</td>"},displayErrorMessage:function(e,t,s){var a=this,i=$(".error_message_container"),r=$(".js-error"),n=null;switch(e){case"error":case"warning":n="icon-warning-inverted"}return i.append('<div class="error_message bottom_margin20 '+e+' clearfix"><a class="close right" href="#"><span class="frg-icon icon-x-circled"></span></a><div class="content clearfix"><div class="frg-icon '+n+' left"></div><div class="text left"><div class="h3 title"><strong>'+t+'</strong></div><span class="text hide">'+s+"</span></div></div></div>"),r.addClass("show_errors"),$(".error_message .close").click(function(){$(this).closest(".error_message").fadeOut()}),a},showFakeLinks:function(){var e=this;return $('a[href="#"]').css(e.highlight),e},stickyFooter:function(){function e(){t=a.height(),footerTopInt=$(window).scrollTop()+$(window).height()-t,s=footerTopInt+"px";footerTopInt<i?a.addClass("sticky"):a.removeClass("sticky")}var t=0,s=0,a=$(".stickyFooter"),i=a.length?a[0].offsetTop:null;null!==i&&e(),$(window).scroll(e).resize(e)},getPhones:function(){var e=this;return"devices"===e.currentPage&&$.ajax({url:"http://www.telus.com/services/cms/page/"+e.lang+"/bc/mobility/devices"}).done(function(t){e.phones=t.devices,$.each(e.phones,function(t,s){var a="";a+='<div class="box phone object clearfix left" data-filter="all voice_only">',a+='\t<div class="image left">',a+='\t\t<a href="device.php">';for(var t=0;t<s.variants.length;t++){var i=0===t?"":" hide";a+='\t\t\t<img class="js-'+s.variants[t].id+i+'" src="'+s.variants[t].image_url+'" alt="'+s.variants[t].color_name+'" />'}a+="\t\t</a>",a+='\t\t<div class="device__variant-container">';for(var t=0;t<s.variants.length;t++)a+='\t\t\t<button class="device-color-button device__variant-item" data-lang="en" data-sku="'+s.variants[t].id+'" aria-label="'+s.variants[t].color_name+'">',a+='\t\t\t\t<span class="frg-icon icon-circle-solid" style="color: '+s.variants[t].color_hex+'"></span>',a+="\t\t\t</button>";a+="\t\t</div>",a+="\t</div>",a+='\t<div class="description right">',a+='\t\t<div class="name">',a+="\t\t\t<div>",a+='\t\t\t\t<h6><a href="device.php">'+s.name+"</a></h6>",a+="\t\t\t</div>",a+='\t\t\t<div class="status positive">Available</div>',a+="\t\t</div>",a+='\t\t<div class="prices">',a+='\t\t\t<div class="no-term left">',a+="\t\t\t\t<h4>$200</h4>",a+='\t\t\t\t<span class="time_period">No term</span>',a+="\t\t\t</div>",a+='\t\t\t<div class="long-term right">',a+="\t\t\t\t<h4>$50</h4>",a+='\t\t\t\t<span class="time_period">3-year term</span>',a+="\t\t\t</div>",a+='\t\t\t<div class="clear"></div>',a+="\t\t</div>",a+='\t\t<div class="mtm">',a+='\t\t\t<div class="gray_text">$230 Monthly</div>',a+='\t\t\t<a class="frg-button" href="device.php">Select</a>',a+="\t\t</div>",a+="\t</div>",a+='\t<div class="clear"></div>',a+="</div>",$(".phones").append(a),e.showVariants()})}),e},showVariants:function(){var e=this;return $(".device-color-button").click(function(){var e=$(this),t=e.attr("data-sku"),s=e.closest(".image, .object"),a=s.find(".js-"+t),i=s.find("img");i.addClass("hide"),a.removeClass("hide")}),e},setupPagination:function(){var e=this,t=$(".paging_display"),s=t.find(".from"),a=t.find(".to"),i=$(".js-next"),r=null,n=t.find(".total"),l=$(".page"),o=l.find("tbody tr"),c=$(".page.current");return 0===c.length&&(c=$(".view_all.current")),s.text(parseInt(c.attr("data-from"))+1),a.text(parseInt(c.attr("data-from"))+c.find("tbody tr").length),n.text(o.length),r=parseInt(n.text())-parseInt(a.text())>10?10:parseInt(n.text())-parseInt(a.text()),r>0?i.text("Next "+r):i.text(" - "),e},ellipsis:function(){var e=this,t=$(".js-ellipsis");return t.each(function(){var e=$(this),t=e.text().trim(),s=e.attr("data-maxlen");t.length>s&&e.text(t.substr(0,parseInt(s)-3)+"...")}),e},showFullName:function(e){var t=this,s=e.attr("fullname");return e.text(s),t},setupDueNow:function(){var e=this,t=parseInt($("[name=base_total]").val()),s=$(".sim select"),a=0,i=$("p.now");return s.each(function(){a+=parseInt($(this).val())}),$.isNumeric(t)&&$.isNumeric(a)&&i.text(e.currencyFormat(t+a)),e},currencyFormat:function(e){return"$"+parseFloat(e,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()},validateEmail:function(e){var t=/^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;return t.test(e)},setupInputMasks:function(){var e=this;return $.mask.definitions["~"]="[+-]",$(".js-phone_input_mask").mask("?(999) 999-9999"),$(".js-postalcode_input_mask").mask("a9a 9a9"),e},displayOverlay:function(e){var t=this;return t.start(),$.ajax().done(function(s){var a=e.closest(".bottom_section"),i=a.find(".js-quantity").val();$.isNumeric(i)&&i>0?e.addClass("current").addClass("added").text("Update"):$.isNumeric(i)&&0==i&&e.removeClass("current").removeClass("added").text("Add to cart"),t.stop()}),t},check_image_availability:function(){var e=this,t=$(".js-check-availability"),s="img/no-image-available.jpg";return t.each(function(){var e=$(this);$.get(e.attr("src")).fail(function(){e.attr("src",s).addClass("replacement_img")})}),e}};